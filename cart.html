<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carrito de Compras - Blue Dreams</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="cart.css">
</head>
<body>
    <header>
        <div class="logo-out">
            <a href="index.html">
                <img src="assets/logo.png" alt="Blue Dreams logo">
            </a>
        </div>
        <div class="nav-capsula">
            <nav class="nav-links">
                <a href="index.html">Inicio</a>
                <a href="products.html">Productos</a>
                <a href="about.html">Sobre</a>
                <a href="contact.html">Contacto</a>
            </nav>
            <div class="header-actions">
                <a href="form.html" class="user-btn-link">
                    <button class="user-btn">
                        <i class="fa-solid fa-user"></i>
                    </button>
                </a>
            </div>
        </div>
        <div class="menu-toggle">☰</div>
    </header>

    <main class="page-content" style="padding-top: 120px;">
        <section class="checkout-section">
            <h1>Finalizar Compra</h1>
            <div class="checkout-layout">
                <div class="order-summary">
                    <h2>Resumen de tu Orden</h2>
                    <div id="checkout-cart-items"></div>
                    <div class="summary-line">
                        <span>Subtotal</span>
                        <span class="price" id="checkout-subtotal">$0</span>
                    </div>
                    <div class="summary-line total-line">
                        <span>Total a Pagar</span>
                        <span class="price" id="checkout-total">$0</span>
                    </div>
                </div>
                <div class="payment-form">
                    <h2>Información de Pago</h2>
                    <form id="payment-form">
                        <div class="form-group">
                            <label for="name">Nombre Completo</label>
                            <input type="text" id="name" required>
                        </div>
                        <div class="form-group">
                            <label for="email">Correo Electrónico</label>
                            <input type="email" id="email" required>
                        </div>
                         <div class="form-group">
                            <label for="address">Dirección de Envío</label>
                            <input type="text" id="address" required>
                        </div>
                        <div class="form-group">
                            <label for="card-number">Número de Tarjeta</label>
                            <input type="text" id="card-number" placeholder="XXXX XXXX XXXX XXXX" required>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="expiry">Fecha de Vencimiento</label>
                                <input type="text" id="expiry" placeholder="MM/AA" required>
                            </div>
                            <div class="form-group">
                                <label for="cvv">CVV</label>
                                <input type="text" id="cvv" placeholder="123" required>
                            </div>
                        </div>
                        <button type="submit" class="submit-payment-btn">Realizar Pago</button>
                    </form>
                </div>
            </div>
        </section>
    </main>

    <!-- Scripts -->
    <script src="main.js"></script>
    <script src="cart.js"></script> 
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const cartItemsContainer = document.getElementById('checkout-cart-items');
            const cartSubtotal = document.getElementById('checkout-subtotal');
            const cartTotal = document.getElementById('checkout-total');
            const paymentForm = document.getElementById('payment-form');

            let cart = JSON.parse(localStorage.getItem('shoppingCart')) || [];

            function renderCheckoutCart() {
                cartItemsContainer.innerHTML = '';
                if (cart.length === 0) {
                    cartItemsContainer.innerHTML = '<p>No hay productos en tu carrito.</p>';
                    return;
                }

                cart.forEach(item => {
                    const itemElement = document.createElement('div');
                    itemElement.className = 'checkout-item';
                    itemElement.innerHTML = `
                        <img src="${item.image}" alt="${item.name}">
                        <div class="item-details">
                            <h5>${item.name} (x${item.quantity})</h5>
                            <p>$${(item.price * item.quantity).toFixed(3)}</p>
                        </div>
                    `;
                    cartItemsContainer.appendChild(itemElement);
                });

                const subtotal = cart.reduce((acc, item) => acc + (item.price * item.quantity), 0);
                cartSubtotal.textContent = `$${subtotal.toFixed(3)}`;
                cartTotal.textContent = `$${subtotal.toFixed(3)}`;
            }
            
            paymentForm.addEventListener('submit', (e) => {
                e.preventDefault();
                alert('¡Gracias por tu compra! Tu pedido ha sido procesado.');
                // Vaciar el carrito después de la compra
                localStorage.removeItem('shoppingCart');
                window.location.href = 'index.html';
            });

            renderCheckoutCart();
        });
    </script>
    <style>
        .checkout-section { max-width: 1100px; margin: 0 auto; padding: 20px; }
        .checkout-layout { display: grid; grid-template-columns: 1fr 1.2fr; gap: 40px; margin-top: 30px;}
        .order-summary, .payment-form { background-color: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); }
        h1, h2 { color: #1e293b; }
        h1 { text-align: center; font-size: 2.2rem; margin-bottom: 30px; }
        h2 { font-size: 1.5rem; margin-bottom: 25px; border-bottom: 1px solid #e2e8f0; padding-bottom: 15px; }
        .checkout-item { display: flex; align-items: center; gap: 15px; padding: 15px 0; border-bottom: 1px solid #e2e8f0; }
        .checkout-item:last-child { border-bottom: none; }
        .checkout-item img { width: 60px; height: 60px; object-fit: contain; border-radius: 8px; }
        .checkout-item .item-details { flex-grow: 1; color: #334155;}
        .checkout-item h5, .checkout-item p { margin: 0; }
        .checkout-item h5 { font-weight: 600; }
        .checkout-item p { font-size: 1rem; font-weight: 700; color: var(--primary); }
        .summary-line { display: flex; justify-content: space-between; margin-top: 15px; font-size: 1.1rem; color: #475569; }
        .summary-line.total-line { font-size: 1.3rem; font-weight: 700; color: #1e293b; margin-top: 20px; border-top: 2px solid #e2e8f0; padding-top: 20px; }
        .summary-line .price { font-weight: 700; }
        .payment-form .form-group { margin-bottom: 20px; }
        .payment-form label { display: block; margin-bottom: 8px; font-weight: 600; color: #334155; }
        .payment-form input { width: 100%; padding: 12px; border: 1px solid #cbd5e1; border-radius: 8px; font-size: 1rem; }
        .form-row { display: flex; gap: 20px; }
        .submit-payment-btn { width: 100%; padding: 15px; background-color: var(--primary); color: white; border-radius: 8px; border: none; font-size: 1.1rem; font-weight: 700; cursor: pointer; margin-top: 10px; transition: background-color .3s;}
        .submit-payment-btn:hover { background-color: #1e3a8a; }
        @media (max-width: 900px) { .checkout-layout { grid-template-columns: 1fr; } }
    </style>

</body>
</html>
